{% extends 'base_cms.html' %}
{% load static %}

{% block title %}ConstructPro - Building with Nature's Wisdom{% endblock %}

{% block content %}
<!-- OPTION 3: Full Width Background -->
<section class="hero-opt-3"
    style="background-image: url('{% if home_page.hero_bg_image %}{{ home_page.hero_bg_image.url }}{% else %}{% static 'images/hero_background_dark.png' %}{% endif %}'); background-size: cover; background-position: center;">
    <div class="hero-bg-overlay"
        style="background: linear-gradient(90deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.2) 60%, rgba(0,0,0,0) 100%);"></div>
    <div class="hero-content-3" style="text-align: left; max-width: 800px; margin: 0; padding-left: 5%;">
        <h1 class="hero-title-3" style="text-transform: capitalize; font-size: clamp(2rem, 4vw, 3rem);">
            {{ home_page.hero_title|safe }}
        </h1>
        <p class="hero-desc-3"
            style="border-left: 4px solid var(--primary-color); padding-left: 1.5rem; text-shadow: none;">
            {{ home_page.hero_subtitle }}
        </p>

    </div>
</section>



<!-- About Section -->
<section class="about-section">
    <div class="container">
        <div class="about-content" style="grid-template-columns: 1fr;">


            <div class="about-text about-text-content scroll-animate" style="padding-left: 0;">

                <h2 class="section-title">{{ home_page.about_heading|safe }}</h2>

                <div class="about-description">
                    {{ home_page.about_content|safe|linebreaks }}
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Services Section -->
<section class="services" id="services">
    <!-- Premium Section Header (Option 4) -->
    <div class="section-header-premium"
        style="background-image: url('{% if home_page.services_bg_image %}{{ home_page.services_bg_image.url }}{% endif %}');">
        <div class="overlay"></div>
        <div class="content container">
            <div class="section-subtitle-premium">{{ home_page.services_subtitle }}</div>
            <h2>{{ home_page.services_heading }}</h2>
            <p>{{ home_page.services_description }}</p>
            <div class="highlight-line"></div>

            <div class="services-grid" style="margin-top: 2rem; text-align: left;">
                {% for service in services %}
                <div class="service-card scroll-animate">
                    <div class="organic-blob"></div>
                    <div class="organic-content">
                        <div class="service-icon-float">
                            <i class="{{ service.icon }}" style="font-size: 28px;"></i>
                        </div>
                        <h3 style="margin-bottom:1rem;">{{ service.title }}</h3>

                        <ul class="service-list" style="max-height: 160px; overflow-y: auto; padding-right: 8px;">
                            {% for item in service.features.all %}
                            <li class="service-list-item">{{ item.title }}</li>
                            {% endfor %}
                        </ul>

                        <a href="{% url 'service_detail' service.slug %}" class="btn-service-read-more">
                            Read More
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

</section>

<!-- ========================================= -->
<!-- SOFTWARE SECTION - OPTION 2 (CLEAN GRID) -->
<!-- ========================================= -->
<section class="variant-section v2-bg" style="padding: 6rem 0;">
    <div class="sw-split-layout">
        <div class="sw-text-side v2">
            <span class="sw-label lbl-primary">{{ home_page.software_label }}</span>
            <div style="font-size: 3rem; font-weight: 700; line-height: 1.1; margin-bottom: 1rem;">
                {{ home_page.software_heading|safe }}
            </div>
            <p>{{ home_page.software_description }}</p>
        </div>
        <div class="sw-separator"></div>
        <div class="sw-content-side">
            <div class="layout-clean-grid">
                <div class="track-clean-grid animate-right">
                    {% for i in "123" %}
                    {% for tool in software_tools %}
                    <div class="sw-item item-square">
                        {% if tool.image %}
                        <img src="{{ tool.image.url }}" alt="{{ tool.name }}">
                        {% endif %}
                    </div>
                    {% endfor %}
                    {% endfor %}
                </div>
                <!-- Duplicate Row for fullness -->
                <div class="track-clean-grid animate-left">
                    {% for i in "123" %}
                    {% for tool in software_tools %}
                    <div class="sw-item item-square"><img src="{% static tool.image %}" alt="{{ tool.name }}"></div>
                    {% endfor %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>





<!-- Why Choose Our Outsourcing Services Section -->
<section class="why-choose-section scroll-animate">
    <div class="container">
        <div class="section-header">
            <div class="section-subtitle">WHY CHOOSE US</div>
            <h2 class="section-title">Why Choose Our <span class="text-gradient">Outsourcing Services?</span></h2>
        </div>

        <div class="why-choose-grid">
            {% for item in why_choose_us %}
            <div class="why-choose-card">
                <div class="why-choose-icon">
                    {{ item.icon_svg|safe }}
                </div>
                <h3>{{ item.title }}</h3>
                <p>{{ item.description }}</p>
            </div>
            {% endfor %}
        </div>

        <div class="service-tagline">
            <p>We act as your <strong>remote estimating team</strong>, ensuring precision and reliability on every
                project</p>
        </div>
    </div>
</section>

<!-- Our Commitment Section -->
<section class="commitment-section scroll-animate">
    <div class="container">
        <div class="section-header">
            <div class="section-subtitle">OUR PROMISE</div>
            <h2 class="section-title">Our <span class="text-gradient">Commitment</span></h2>
        </div>

        <div class="commitment-grid">
            {% for item in commitments %}
            <div class="commitment-card">
                <div class="commitment-number">{{ item.number }}</div>
                <h3>{{ item.title }}</h3>
                <p>{{ item.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Get a Free Sample Section -->
<section class="free-sample-section scroll-animate">
    <div class="container">
        <div class="free-sample-content">
            <div class="free-sample-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M12,19L8,15H10.5V12H13.5V15H16L12,19Z" />
                </svg>
            </div>
            <h2>{{ home_page.free_sample_heading }}</h2>
            <p>{{ home_page.free_sample_description }}
            </p>
            <a href="{% url 'contact' %}" class="btn-primary">Request Free Sample â†’</a>
        </div>
    </div>
</section>


<!-- How It Works Section -->


<!-- TESTIMONIALS OPTION 1: Classic Grid -->
<section class="testimonials-section testimonials-opt-1 scroll-animate">
    <div class="container">
        <div class="section-header">
            <div class="section-subtitle">TESTIMONIALS</div>
            <h2 class="section-title">What Our Client <span class="text-gradient">Say's</span></h2>
        </div>

        <div class="testimonials-grid">
            {% for testimonial in testimonials %}
            <div class="testimonial-card">
                <div class="testimonial-stars">
                    {% for i in "12345"|make_list %}
                    {% if forloop.counter <= testimonial.rating %} <svg width="20" height="20" viewBox="0 0 24 24"
                        fill="currentColor">
                        <path
                            d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" />
                        </svg>
                        {% endif %}
                        {% endfor %}
                </div>
                <div class="testimonial-quote-mark">"</div>
                <p class="testimonial-text">{{ testimonial.content }}</p>
                <div class="testimonial-author">
                    <div class="author-name">{{ testimonial.name }}</div>
                    <div class="author-role">{{ testimonial.role }}</div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>







<script>
    // Scroll-triggered animations using Intersection Observer
    document.addEventListener('DOMContentLoaded', function () {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px 0px 0px'
        };

        const observer = new IntersectionObserver(function (entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                    // Stop observing after animation triggers to prevent duplicates
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        // Observe all scroll-animatable elements
        const elementsToAnimate = document.querySelectorAll('.scroll-animate');
        elementsToAnimate.forEach(el => {
            observer.observe(el);
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const testimonialGrid = document.querySelector('.testimonials-grid');
        if (!testimonialGrid) return;

        const originalCards = Array.from(testimonialGrid.children);
        const totalCards = originalCards.length;

        // Clone all cards for seamless looping
        originalCards.forEach(card => {
            const clone = card.cloneNode(true);
            testimonialGrid.appendChild(clone);
        });

        let autoScrollInterval;
        const scrollDelay = 4000; // 4 seconds between slides
        let currentIndex = 0;

        function getCardWidth() {
            const card = testimonialGrid.firstElementChild;
            if (!card) return 0;
            const style = getComputedStyle(testimonialGrid);
            const gap = parseInt(style.gap) || 20;
            return card.offsetWidth + gap;
        }

        function scrollToIndex(index, smooth = true) {
            const cardWidth = getCardWidth();
            const targetScroll = index * cardWidth;
            testimonialGrid.scrollTo({
                left: targetScroll,
                behavior: smooth ? 'smooth' : 'auto'
            });
        }

        function startAutoScroll() {
            stopAutoScroll();
            autoScrollInterval = setInterval(() => {
                currentIndex++;

                // If we've scrolled past original cards, reset to beginning
                if (currentIndex >= totalCards) {
                    scrollToIndex(currentIndex, true);

                    // After animation completes, instantly reset to first card
                    setTimeout(() => {
                        currentIndex = 0;
                        scrollToIndex(0, false);
                    }, 600);
                } else {
                    scrollToIndex(currentIndex, true);
                }
            }, scrollDelay);
        }

        function stopAutoScroll() {
            if (autoScrollInterval) {
                clearInterval(autoScrollInterval);
                autoScrollInterval = null;
            }
        }

        // Initialize auto-scroll
        startAutoScroll();

        // Pause on hover/touch
        testimonialGrid.addEventListener('mouseenter', stopAutoScroll);
        testimonialGrid.addEventListener('mouseleave', startAutoScroll);
        testimonialGrid.addEventListener('touchstart', stopAutoScroll, { passive: true });
        testimonialGrid.addEventListener('touchend', () => setTimeout(startAutoScroll, 1000));

        // Handle window resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                stopAutoScroll();
                currentIndex = 0;
                scrollToIndex(0, false);
                startAutoScroll();
            }, 250);
        });
    });
</script>
{% endblock %}